{% extends 'base.html' %} 

{% block title %} Chatroom-Zensphere {% endblock %}

{% block content %}
<nav class="navbar navbar-expand-lg navbar-light">
  <button class="navbar-toggler" type="button" 
          data-toggle="collapse" data-target="#navbarTogglerDemo03" 
          aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation"
      >
      <span class="navbar-toggler-icon"></span>
  </button>
  <a class="navbar-brand" href="{{ url_for('home_page') }}">ZENSPHERE</a>
  <!------------>
  <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
      <ul class="navbar-nav mr-auto mt-2 mt-lg-0 ml-auto">
              <li class="nav-item active text-center">
                  <a class="nav-link" href="">
                      Features 
                      <span class="sr-only">(current)</span>
                  </a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="{{ url_for('faq') }}">FAQ</a>
              </li>
      </ul>
      <!-------------------->
      <!--Buttons-->
      <form class="form-inline my-2 my-lg-0">
          <a href="{{url_for('login')}}">
          <button class="btn btn-outline-primary my-2 my-sm-0" type="button">Logout</button>
          </a>
      </form>
  </div>
</nav>  
<!-------------->
<div class="content">
  <div class="message-box">
      <h2>Chat Room: {{ code }}</h2>
      <div class="messages" id="messages"></div>
          <div class="inputs">
              <input
                type="text"
                rows="3"
                placeholder="Message"
                name="message"
                id="message"
              />
              <button type="button" name="send" id="send-btn" onClick="sendMessage()">
                Send
              </button>
          </div>
      </div>
  </div>
</div>
<!------------------->
    <!--Footer-->    
    <footer>
          <div class="container-fluid">
              <div class="row row-cols-1 row-cols-sm-2 row-cols-md-5 py-5 my-5 border-top">
                  <div class="col mb-3">
                      <div class="lc-block">
                          <div editable="rich">
                              <h2>ZenSphere</h2>
                              <p class="text-muted">Privacy-Terms</p>
                              <p class="text-muted">Â© 2024 ZenSphere</p>
                          </div>
                      </div>
                  </div>
                  <!------------------------->
                  <div class="col offset-md-2 mb-3">
                    <div class="lc-block mb-4">
                        <div editable="rich">
                            <h4>Features</h4>
                        </div>
                    </div>
                </div>
                  <!-------------------->
                  <div class="col mb-3">
                      <div class="lc-block mb-4">
                          <div editable="rich">
                              <h4>About us</h4>
                          </div>
                      </div>
                      <!------------------->
                      <div class="lc-block small">
                          <div editable="rich" class="footer-links-list text-decoration-none">
                              <ul>
                                  <li><a href="#">Our Story</a> </li>
                                  <li><a href="#">Work with us</a></li>
                                  <li><a href="#">Careers</a></li>
                              </ul>
                          </div>
                      </div>
                  </div>
                  <!------------------>
                  <div class="col mb-3">
                      <div class="lc-block mb-4">
                          <div editable="rich">
                              <h4>Resources</h4>
                          </div>
                      </div>
                      <!-------------------->
                      <div class="lc-block small">
                          <div editable="rich" class="footer-links-list text-decoration-none">
                              <ul>
                                  <li><a href="{{url_for('faq')}}">FAQ</a></li>
                                  <li><a href="#">Contact Us</a></li>
                              </ul>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
  </footer>
  <!--End of Footer-->
<script type="text/javascript">
  let socketio = io();

  const messages = document.getElementById("messages");

  const createMessage = (name, msg) => {
    const content = `
    <div class="text">
        <span>
            <strong>${name}</strong>: ${msg}
        </span>
        <span class="muted">
            ${new Date().toLocaleString()}
        </span>
    </div>
    `;
    messages.innerHTML += content;
  };

  socketio.on("message", (data) => {
    createMessage(data.name, data.message);
  });

  const sendMessage = () => {
    const message = document.getElementById("message");
    if (message.value == "") return;
    socketio.emit("message", { data: message.value });
    message.value = "";
  };
</script>
{% for msg in messages %}
<script type="text/javascript">
  createMessage("{{msg.name}}", "{{msg.message}}");
</script>
{% endfor %} {% endblock %}
